

$("input:text, textarea").c("focus",function(){$(this).g("activeField")||$(this).d("activeField")}).c("blur",function(){$(this).h("activeField")});jQuery.b.f=function(){this.a("position","absolute");this.a("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px");this.a("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px");return this};$.b.i=function(a,b){return this.e({opacity:"toggle",height:"toggle"},"fast",a,b)};

(function(){function q(b,i){return function(){return b.apply(i,arguments)}}var b;b=jQuery;b.N.I=function(h,i){var j,o,f,d;o=0;f=oDATA.i(i);1<b(this).length&&alert("Daugiau nei vienas objektas ant kurio dedamas gridas!");f=b.extend(f.t,{B:f.h});h.a&&b.extend(f,{T:function(c){var e,a,p,l,d,g,f;if(0===o++){e=function(){return l.find("th span").r("ui-icon-triangle-1-n ui-icon-triangle-1-s ui-icon-carat-2-n-s").m("ui-icon-carat-2-n-s")};g=b(c).b("line-height","0.9em");a=f=d=0;p=g.find("th").length;for(l=
g.H(!0,!0);a<p;)c=h.a.M(a,"col"),""!==c?(g.find("th:eq("+(a-f)+")").n("colspan",h.a[c].span).b("text-align","center").X(h.a[c].u).next().remove(),a+=h.a[c].span-1,f++):(g.find("th:eq("+(a-f)+")").n("rowspan",2),l.find("th:eq("+(a-d)+")").remove().end().find("th").click(function(a){var c,a=b(a.target).find("span:first");a.e("ui-icon-carat-2-n-s")?c="ui-icon-triangle-1-n":a.e("ui-icon-triangle-1-n")?c="ui-icon-triangle-1-s":a.e("ui-icon-triangle-1-s")&&(c="ui-icon-triangle-1-n");e();return a.m(c).r("ui-icon-carat-2-n-s")}),
d++),a++;return g.click(e).C(l)}}});h.c&&b.extend(f,{Q:function(c){var e,a,f,d,i,g,j,k,m,n;k=b(c.aa).find("tr");if(!(2>k.length)){i=k[0].getElementsByTagName("td").length;n="";f=-1;a;d=0;for(e=function(a){a=parseInt(a,10);return oDATA.i(h.c.k.w).h.L(a,h.c.k.v)};d<k.length;)g=c.A+d,f++,m=c.F[c.D[g]].z[h.c.s],m!==n&&(j=document.createElement("tr"),g=document.createElement("td"),g.colSpan=i,g.className="group",g.innerHTML=e(m),j.appendChild(g),k[d].parentNode.insertBefore(j,k[d]),n&&(a.innerHTML+=" ("+
f+"vnt.)",f=0),n=m,a=g),d++;return a.innerHTML+=" ("+(f+1)+"vnt.)"}}});b.extend(!0,f,{U:function(c){return c.V=null},ba:{sLengthMenu:"Rodyti _MENU_ ir. psl.",sZeroRecords:"Nerasta ira\u0161u..",sInfo:"Viso: _TOTAL_",sInfoEmpty:"Rodoma: 0 - 0 i\u0161 0 ira\u0161u",sInfoFiltered:"(Filtruota i\u0161 _MAX_ ira\u0161u)",sSearch:"Ie\u0161koti:"},sProcessing:"Laukite..",bJQueryUI:!0,bSortClasses:!1,bPaginate:!1,sScrollX:"100%",bScrollCollapse:!1,clickEvtIsLive:1,colorAfterNewInsert:1},h);d=b(this).J(f);
setTimeout(q(function(){b(d).b("width","100%");return d.P()},this),100);h.R&&b(this).find("tbody tr").bind("click",function(){var c;c={q:i,d:"Edit",g:this,l:d.S(d.o(this)),f:function(b){var a;a=d.o(c.g);return d.W(b,a,0)}};return new clsEditableForm(c)});h.j&&(j=b(this).parent().parent().parent().find("div:first"),b.K(h.j,function(c,e){var a;a=e.p?{Y:{ca:e.p}}:{};return b('<button class="AddNew" title='+c+">"+c+"</button>").button(a).click(function(a){e.q=i;a.target&&(e.target=b(a.target).$("button")?
b(a.target):b(a.target).parent(),b(e.target).b("display","none"));"Head"===e.form&&(e.form=b("<div></div>").Z(j).b("margin-bottom","10px"));return"Add"===e.d?(e.l=0,e.f=function(a){return d.O(a)},new clsEditableForm(e)):e.d(e)}).G(j)}));return d}}).call(this);
(function(){var d,i,j,k,h,e;e={};j=$("#header div.subHeader a.highlight").data("controller");d="";$(function(){k();return $("#side-bar li>a").M().V("click")});k=function(){$("#side-bar").R("click","li>a",function(){var a,c,b;$("body").q("wait");$("#side-bar a.highlight").k("highlight");$(this).q("highlight");(a=$(this).data("Par")?JSON.stringify($(this).data("Par")):"")&&$(this).data("opt","refresh");window.Q.v=$(this).data("action");"refresh"===$(this).data("opt")?(c=!0,$(this).data("opt","ok")):
c=!1;b="/"+j+"/"+(d=$(this).data("action"));e[d]&&!c?h(e[d][0]):i(b,a);return $("body").k("wait")})};i=function(a,c,b){null==b&&(b=$("#main-copy"));b.parent().L();$.J({url:a,type:"POST",data:c,dataType:"json",contentType:"application/json; charset=utf-8",K:function(a){return a.setRequestHeader("Content-type","application/json; charset=utf-8")},error:function(){b.s("<center><h2>\u0160i dalis dar nebaigta("+d+")</h2><img src='/Content/images/UnderConstruction.gif' alt=''/></center>");return b.parent().u()},
T:function(a){h(a,b);e[d]?e[d].push(a):e[d]=[a];b.parent().u();return!1}})};h=function(a,c){var b;null==c&&(c=$("#main-copy"));a.o&&c.empty().s(a.o);for(b in a)"Render"!==b&&"Script"!==b&&!oDATA.e[b]&&this.t.p(b,a[b]);if("Clients_NewClient"===d)Clients_NewClient();else if("MyEvents"===d)Title_MyEvents();else if("ClientsList"===d)Clients_ClientsList_Grid();else if(a.c)a.c.m&&$.N(a.c.m),a.c.j&&(this.j=a.c.j);else My[d]()};Array.prototype.remove=function(a){var c;if(-1<(a=this.indexOf(a)))return[].splice.apply(this,
[a,a-a+1].concat(c=[])),c};this.t={b:{},p:function(a,c){return this.b[a]=c},e:function(a){return this.b[a]},I:function(a,c,b){if("Edit"===b)return this.a(a[0],c),a;if("Add"===b)return this.f(c).push(a);if("Delete"===b)return this.f(c).remove(a)},a:function(a,c){var b,g,f;b=this.f(c);g=b.length-1;for(f=-1;f<g;)if(f++,b[f][0]===a)return b[f]},f:function(a,c){if("string"===typeof a)return c?this.b[a].d:this.b[a].h;c?a.d:a.h;return a.h},z:function(a,c,b){return this.a(a,c).n(b)},D:function(a,c,b){var g;
g=this.a(c,a);return b.r(function(){var b,c,d;d=$(this);b=d.data("ctrl");c=oDATA.e(a).d.l(b.w);b.i=g[c];return b.A?("List"===b.G?(c=oDATA.a(b.i,b.F),d.data("newval",c[b.P]),d.g(c.n(b.O))):d.g(g[c]),d.k("inputTip")):d.g(g[c])})},C:function(a){$.extend(a.data("ctrl"),{B:1,id:0});return a.find("div.ExtendIt").find("input, textarea").r(function(){return $(this).g("").data("ctrl").i=""})},H:function(a,c,b,d,f){var e;e="number"===typeof d?d:oDATA.e(a).d.l(d);"number"===typeof d&&c&&alert("Updatinimui reikalingas lauko pavadinimas");
this.a(b,a)[e]=f;if(c)return $.S("/Update/editInPlace",{id:b,U:c,W:f,field:d})}}}).call(this);
var d=new b;$(document).m(function(){$("#dialog:ui-dialog").a("destroy");$(".selector").click(function(){d.d()})});
function b(){this.d=function(){var c=CallThisBack;this.b=c;d.result=0;$("<div></div>").j('<p class="validateTips">All form fields are required.</p><form id="dialog-form-validate"><fieldset><label for="thename">Name</label><input type="text" name="thename" id="thename" class="validate-dialog text ui-widget-content ui-corner-all" /><label for="email">Email</label><input type="text" name="email" id="email" value="" class="validate-dialog text ui-widget-content ui-corner-all" /><label for="password">Password</label><input type="password" name="password" id="password" value="" class="validate-dialog text ui-widget-content ui-corner-all" /></fieldset></form>').a(a).a("open")};this.b;
var a={g:!1,height:"auto",width:465,k:!0,h:{"I\u0161saugoti":function(){e()&&$(this).a("close")},"At\u0161aukti":function(){d.result=0;$(this).a("close")}},close:function(){1===d.result&&(d.b(),alert("jo"));$(this).remove();$(".validity-modal-msg").remove()}}}
function e(){var a=$("#dialog-form-validate"),c=/'number'/;$.c.n({l:"modal"});$.c.start();$(a).children().find(".validate-dialog").i(function(){var a=$(this);c.test("require().match('number').lessThanOrEqualTo(100)")&&a.e(a.e().replace(/,/g,"."));eval("child.require().match('number').lessThanOrEqualTo(100)")});a=$.c.end();d.result=a.f?1:0;return a.f};
var n=null;
(function(){(function(){function e(k){var j,o,h;$("body").n("cursor","wait");b.d=0;$.extend(b,k);m=b.s!=n?b.s[0]:0;d=oDATA.F(b.O);i=b.B;d==n&&alert("Neradau objekto "+b.O+" clsEditableForm klaseje");a={b:d.b,o:d.o,a:b.s};if(m&&a.a==n){h=d.a;j=0;for(o=h.length;j<o;j++)if(k=h[j],k[0]===m){a.a=k;break}}if(!b.d&&(g=d.X,b.d="Add"===i?g.l.T:g.l.Z,g.l.C&&"Edit"===i)){var f;h=g.l.C;f=[];j=0;for(o=h.length;j<o;j++)k=h[j],f.push(a.a[k]);b.d+=" - "+f.join(" ")}this.N();$("body").n("cursor","default")}var i,
g,a,c,l,m,d,b;m=0;d={};g={};a={};d={};i={};b={i:"divDialogForm",ya:"Dialog",u:0,s:0};e.prototype.N=function(){var k,j,d;!b.form||"Dialog"===b.form?(k={oa:!1,minWidth:"65em",minHeight:"40em",width:"80em",Ca:!0,title:b.d,draggable:!0,pa:{"I\u0161saugoti pakeitimus":function(){return l()},"I\u0161trinti":function(){return $(this).f("close")},"At\u0161aukti":function(){return $(this).f("close")}},close:function(){return $(this).remove()},ua:function(){return $("div.validity-modal-msg").remove()}},d=b.q?
b.q:this.z(a,m),$("#dialog:ui-dialog").f("destroy"),$("<div id='"+b.i+"'></div>").c(d).f(k).f("open")):(d=b.q?b.q:this.z(a,m),$(d).append('<button style="float:right;" title="At\u0161aukti">At\u0161aukti</button>').find("button:last").button().click(function(){return c()}).end().append('<button style="float:right;" title="I\u0161saugoti">I\u0161saugoti</button>').find("button:last").button().click(function(){return l()}).end().ma(b.form).append('<div style="clear:both;"></div>').Ga("<h3>"+b.d+"</h3>"));
oCONTROLS.ha($("#divEditableForm"));j=$("#"+b.i).parent();j.find("button:contains('I\u0161saugoti')").m("disabled","disabled").la("ui-state-disabled");j.find("input, textarea").bind("click keyup",function(){return j.find("button:contains('I\u0161saugoti')").P("disabled").Q("ui-state-disabled")});j.find("div.ExtendIt button").click(function(){return j.find("button:contains('I\u0161saugoti')").P("disabled").Q("ui-state-disabled")});j.find("button:contains('I\u0161trinti')").n("display","none")};c=function(){b.target&&
b.target.n("display","block");return b.form.empty()};l=function(){var k;if(k=oGLOBAL.ka($("#divEditableForm")))return oGLOBAL.ja({B:i,e:k,V:{ga:function(k,g){var h,f,p,e,l;p=a.b.length;f=0;e=g.e.v.length;"Add"===i&&(a.a=Array(p),a.a[0]=k.r.ca);for(;f<p-1;){h=l=0;for(f++;l<e;){if(a.b[f].j===g.e.v[l]){a.a[f]=g.e.a[l];h=1;break}l++}!h&&"Add"===i&&(a.b[f].h!=n?a.a[f]="Today"===a.b[f].h?fnGetTodayDateString():"UserName"===a.b[f].h?UserData.fa():"UserId"===a.b[f].h?UserData.da():a.b[f].h:a.b[f].K?(h=a.b[f].K,
a.a[f]=g.e[h]):a.a[f]="");a.a[f]===n&&(a.a[f]="")}for(f=0;f<p-1;)f++,a.b[f].G&&(h=a.b[f].G,m=a.a[h],e=a.b[h].p.w,h=a.b[h].p.Aa,a.a[f]=oDATA.ba(m,e,h));oDATA.ia(a.a,d,i);b.u&&b.u(a.a);return!b.form||"Dialog"===b.form?$("#"+b.i).f("close"):c()}},l:"",U:$("#divEditableForm")});if(0===k)return $("#"+b.i).f("close")};e.prototype.z=function(a,b){var d,h,f,c,e;h=a.b.length;c=0;for(f="";c<h;)d="",a.o.L[c].R!=n&&(a.a[c]!=n&&a.a[c]?(e=a.b[c].J?a.b[c].J:"",e="String"===e||"Email"===e||"Date"===e.substring(0,
4)?'"'+a.a[c].replace(/"/g,"\\u0027")+'"':a.a[c]):e='""',d+='"Value":'+e+",",f+="<div class='ExtendIt' data-ctrl='{"+d+'"Field":"'+a.b[c].j+'","classes":"UpdateField","labelType":"Left"}\'></div>'),c++;d=(b!=n?'"NewRec":0,"id":'+b+",":'"NewRec":1,')+('"Source":"'+(g.w?g.w:g.g)+'","tblUpdate":"'+g.g+'"');return"<div id='divEditableForm' class='inputform' style='margin:0 2em;' data-ctrl='{"+d+"}'>"+f+"</div>"};return e})();$.M.ea=function(e,i,g){var a,c;c=this.find("#"+e.$);a=eval("("+c.m("data-ctrl")+
")");i.id=a.id;i.Y=a.g;c.find("div.EditInPlace, span.EditInPlace").wa(function(){return $(this).H({id:a.id,g:a.g,t:e.t,e:i,A:g})});return this};$.M.H=function(e){var i,g,a,c,l,m;c=$(this);i=c.c();(a="object"===typeof c.data("ctrl")?c.data("ctrl"):eval("("+c.m("data-ctrl")+")"))||(a={});$.extend(a,e,{j:a.k});e.t&&(m=oDATA.F(e.t),g=m.b.aa(a.k),a=$.extend({},m.b[g],a),$.extend(a,{d:m.o.L[g].R}));l=function(d,b){c.c('<img src="/Content/images/ajax-loader.gif" alt='+d+">");return $.Fa("/Update/editInPlace",
{id:a.id,Ja:a.g,La:d,field:a.k,Ia:b},function(b){if(b.D){Alert(b.D,"Klaida i\u0161saugant duomenis");return c.c(i)}c.c(b.r);i=b.r;if(e.e){e.e.a.push(b.r);e.e.v.push(a.k)}if(e.A)return e.A({ra:c,va:a,id:a.id})})};g={ta:function(a){var b;a.m("width",a.width());b=a.width()<200?200:a.width();return a.find("textarea, input").width(b)}};a.p?g.S=function(d){var b;if(d.find("input").length>0)return false;b=oCONTROLS.Ka({data_ctrl:JSON.stringify($.extend(a.p,{j:a.j})),classes:"ui-widget-content ui-corner-all",
text:d.c(),Value:d.c()});d.c(b).find("input").W({za:function(a,b){return l(a,b)}}).focus().bind("blur",function(){var a;return a=setInterval(function(){var b;b=$("ul.ui-autocomplete").n("display");if(b==="none"||b===void 0){c.c(i);return clearInterval(a)}},3E3)});return false}:a.I&&(g.S=function(d){var b,c,e,g;if(d.find("input").length>0)return false;d.c("<input type='text'></input>");e=d.find("input");e.Ma(i);g=a.I;for(b in g){c=g[b];if(b==="datepicker"){$.extend(c,{Ea:function(a){return l(a,n)}});
e.m("readonly","readonly")[b](c).focus()}else b==="mask"&&e[b](c).focus().bind("blur",function(a){return(a=$(a.target).Ba("value"))&&a!==i?l(a,n):d.empty().c(i)})}return false});(!a.id||!a.g||!a.k)&&alert("N\u0117ra privalom\u0173 duomen\u0173 (id, tblUpdate, Field)-clsEditableForm");$.extend(a,{sa:g,qa:function(a,b){l(b,n);return'<img src="/Content/images/ajax-loader.gif" alt='+b+">"}});c.xa(a);a.d&&c.Ha({position:{na:"top center",Da:"bottom center"},content:a.d});return c}}).call(this);
(function(){var b;b=jQuery;b.d.c=function(a){var c,a=b.extend({},b.d.c.i,a);c=b(this).find("button").m({content:a.f[a.a],position:{g:"top center",l:"bottom center"}}).button({k:a.e[a.a]});if(a.j)return c.click({h:c},function(b){if(3<a.a)Alert("Sutartis jau sutvarkyta","Jeigu yra klausim\u0173 kreipkit\u0117s pas administracij\u012f");else return Confirm(a.n[a.a],"Spauskite 'Gerai' jei sutinkate, 'At\u0161aukti' jei ne",function(c){if(c)return a.a++,b.data.h.m({content:a.f[a.a],position:{g:"top center",
l:"bottom center"}}).button({k:a.e[a.a]}),oDATA.q(a.u,a.v,a.p,a.o,a.a)})})};b.extend(b.d.c,{i:{e:[{},{b:"img16-tag_red"},{b:"img16-tag_yellow"},{b:"img16-tag_green"},{b:"img16-tag_green",t:"img16-check"}],f:["","Nauja sutartis.<br /> Patvirtiniti sutart\u012f?","Patvirtinta sutartis.<br /> \u012ejungti paslaugas?","Paslaugos \u012fjungtos.<br /> Perkelti prie sutvarkyt\u0173?","Suartis sutvarkyta. Joki\u0173 kit\u0173 veiksm\u0173<br /> su \u0161ia sutartimi nereikia."],n:["","Ar patvirtinate sutarties \u012fsigaliojim\u012f?",
"Ar \u012fjungtos paslaugos pagal sutart\u012f?","Ar gauti visi dokumentai ir sutartis sutvarkyta?"],j:!1}});(function(){var a;a="";return function(){a=b("#header").data("user");b("#header").s("data-user","");"object"!==typeof a&&alert("No user object")}})();b(function(){return window.r=new clsUserData})}).call(this);
/// <reference path="../Plugins/jquery-1.6.2-vsdoc.js" />
(function($) {
   $.fn.extend({
      //pass the options variable to the function
      ValidateOnBlur: function(options) {
         //Set the default values, use comma to separate the settings, example:
         var defaults={
            ValidArray: [],
            Allow: 'Integer', //Decimal Date Time DateCtrl DateNotLessCtrl DateNotMoreCtrl  //Sutampa su nurodymais oDATA.SD.Cols[i].Type
            Trim: true
         }
         var opt=$.extend(defaults, options);
         //Jei turi but array, jo opcija ValidArray
         //ValidateOnBlur({ Allow: 'Integer' })
         //ValidateOnBlur({ Allow: 'Decimal' })
         return this.each(function() {
            var t=$(this);
            t.blur(function() {
               var inputVal=t.val();
               var re=/^(\s*)([\W\w]*)(\b\s*$)/;
               if(re.test(inputVal)) {
                  inputVal=inputVal.replace(re, '$2');
               } //remove leading and trailing whitespace characters
               if(opt.ValidArray.length) {
                  var idx=jQuery.inArray(inputVal, ValidArray); if(idx=== -1) { t.val(""); return; }
               }
               else if(opt.Allow==='Integer') {
                  re=/\D*(\d+)\D*/; if(re.test(inputVal)) inputVal=inputVal.replace(re, "$1"); else { t.val(""); return; }
               }
               else if(opt.Allow==='Decimal') {
                  inputVal=inputVal.replace(',', '.'); //re=/.*?(([0-9]?\.)?[0-9]+).*/g;
                  re=/\D*(\d\d*\.\d+|\d+)\D*/;
                  if(re.test(inputVal))
                     inputVal=inputVal.replace(re, "$1");
                  else { t.val(""); return; }
               }
               else if(opt.Allow==='Date'||opt.Allow==='DateCtrl'||opt.Allow==='DateNotLessCtrl'||opt.Allow==='DateNotMoreCtrl') {
                  inputVal=inputVal.replace('.', '-').replace('/', '-').replace('\\', '-');
                  re=/\.*((19|20\d{2})-([0]?[1-9]|[1][0-2])-([0-2][1-9]|3[0-1]|\d))+\.*/;
                  if(re.test(inputVal))
                     inputVal=inputVal.replace(re, "$1");
                  if(oVALIDATE.IsNumeric(inputVal)&&opt.Allow==='DateNotMoreCtrl') { if((parseInt(inputVal, 10))>=((new Date()).getFullYear())) { inputVal=((new Date()).getFullYear()); } }
                  if(oVALIDATE.IsNumeric(inputVal)&&opt.Allow==='DateNotLessCtrl') { if((parseInt(inputVal, 10))<=((new Date()).getFullYear())) { inputVal=((new Date()).getFullYear()); } }
                  else { t.val(""); return; }
               }
               else if(opt.Allow==='Year'||opt.Allow==='YearNotMore'||opt.Allow==='YearNotLess') {
                  inputVal=inputVal.replace('.', '-').replace('/', '-').replace('\\', '-');
                  re=/\.*(19|20\d{2})\.*/;
                  if(re.test(inputVal)) inputVal=inputVal.replace(re, "$1");
                  if(oVALIDATE.IsNumeric(inputVal)&&opt.Allow==='YearNotMore') { if((parseInt(inputVal, 10))>=((new Date()).getFullYear())) { inputVal=((new Date()).getFullYear()); } }
                  if(oVALIDATE.IsNumeric(inputVal)&&opt.Allow==='YearNotLess') { if((parseInt(inputVal, 10))<=((new Date()).getFullYear())) { inputVal=((new Date()).getFullYear()); } }
                  else { t.val(""); return; }
               }
               // \.*(19|20\d{2})\.*
               //\.*((19|20\d{2})[./-]([0]?[1-9]|[1][0-2])[./-]([0-2][1-9]|3[0-1]|\d))+\.*
               t.val(inputVal);
            });
         });
      }
   });
})(jQuery);
/* Lithuanian (UTF-8) initialisation for the jQuery UI date picker plugin. */
/* @author Arturas Paleicikas <arturas@avalon.lt> */
jQuery(function($) {
   $.datepicker.regional['lt']={
      closeText: 'Uždaryti',
      prevText: '&#x3c;Atgal',
      nextText: 'Pirmyn&#x3e;',
      currentText: 'Šiandien',
      monthNames: ['Sausis', 'Vasaris', 'Kovas', 'Balandis', 'Gegužė', 'Birželis',
                'Liepa', 'Rugpjūtis', 'Rugsėjis', 'Spalis', 'Lapkritis', 'Gruodis'],
      monthNamesShort: ['Sau', 'Vas', 'Kov', 'Bal', 'Geg', 'Bir',
                'Lie', 'Rugp', 'Rugs', 'Spa', 'Lap', 'Gru'],
      dayNames: ['sekmadienis', 'pirmadienis', 'antradienis', 'trečiadienis', 'ketvirtadienis', 'penktadienis', 'šeštadienis'],
      dayNamesShort: ['sek', 'pir', 'ant', 'tre', 'ket', 'pen', 'šeš'],
      dayNamesMin: ['Se', 'Pr', 'An', 'Tr', 'Ke', 'Pe', 'Še'],
      weekHeader: 'Sv',
      //dateFormat: 'yy-mm-dd',
      firstDay: 1,
      isRTL: false,
      showMonthAfterYear: false,
      yearSuffix: '',
      dateFormat: 'yy-mm-dd',
      changeMonth: true,
      showOtherMonths: true,
      selectOtherMonths: true
      //showWeek: true
   };
   $.datepicker.setDefaults($.datepicker.regional['lt'], { duration: 'fast' });
});
/**/
(function($) {
   $.fn.extend({
      swfUpload: function(options) {
         //privalomi duomenys: {RecId:??,UserId:??,tblUpdate:"tblContracts",url:??}
         var defaults={
            Title: "Pridėti bylas prie sutarties",
            Description: true,
            Legend: "Opa"
         }
         var opt=$.extend(defaults, options);
         return this.each(function() {
            var t=$(this);
            html=(opt.Legend)?"<fieldset><legend style='font-weight:bold;'>"+opt.Legend+"</legend>":"";
            html+=(opt.CtrlToSetId)?"<div id='"+opt.CtrlToSetId+"'></div>":"";
            html+='<div title="'+opt.Title+'" style="cursor:pointer;margin-left:2em;position:relative;clear:both;"><span style="display:inline-block;" class="img24-attach ui-button-icon-primary"></span><span style="position:absolute;margin:.3em 1em;text-decoration:underline;color:#336699">Prisegti bylas</span></div>';
            html+=(opt.Legend)?"</fieldset>":"";
            $(html)
            .find("div:last")
            .bind("click", function() {
               var opt=$(this).closest("div.ExtendIt, span.ExtendIt").data("ctrl");
               $.extend(opt, { Control: t });
               oCONTROLS.UploadDialog(opt,true);//2-ToDialog
            })
            .qtip({ position: { at: 'top center', my: 'bottom center'} })
            .end()
            .appendTo(t);
            oCONTROLS.UploadDialog.SetAttachedFiles(opt);//Prikabinam priatachintus failus
         });
      }
   });
})(jQuery);
oCONTROLS.UploadDialog=function(options,ToDialog) {
   var FileData=[];
   var defaults={
      upload_url: "/Files/AsyncUpload",
      DialogTitle: 'Bylų prisegimas prie dokumento',
   }
   var opt=$.extend(defaults, options);
   if(!opt.UserId||!opt.tblUpdate||!opt.RecId) { alert("swfUploaderis neturi vieno iš būtinų parametrų-UserId,tblUpdate,RecId!"); return; }
   var fnSetAttachedFiles=function(HaveData,ToDialog) {
      //var par={ RecordId: opt.RecId };
      var par=opt;
      if(HaveData) { $.extend(par, { HaveData: false }); }
      else { $.extend(par, { HaveData: true, FileData: FileData }); }
      //if(oDATA.Get(par.AttachedFiles)) {  }
      oCONTROLS.UploadDialog.SetAttachedFiles(par,ToDialog);
   }
   dlgOpt={ autoOpen: false, minWidth: '400', minHeight: '700', width: '700', modal: true, title: opt.DialogTitle,
      buttons: {
         "Išeiti": function() {
            return $(this).dialog("close");
         }
      },
      close: function() {
         if(opt.fnCallBack) { opt.fnCallBack(FileData); }
         if(opt.CtrlToSetId) { fnSetAttachedFiles(true,false); }
         //if(opt.refreshAction){$("#side-bar ul li a").filter("[data-action='"+opt.refreshAction+"']").data("opt","refresh")}
         return $(this).remove();
      }
   };
   //{RecId:??,UserId:??,tblUpdate:"tblContracts",url:??}
   $("#dialog:ui-dialog").dialog("destroy");
   _html="<div id='uplFiles'></div><div id='swfupload-control' style='clear:both;'><p style='font-size:medium;margin:.5em 0 1em 0;'>Pasirinkite norimas prisegti bylas. Galite pasirinkti iš karto daugiau bylų naudodami mygtukus SHIFT/ CTRL. Vienu metu pasirinkite ne daugiau 10MB.";
   _html+="</p><div><span id='dialog_file_upload_btn' ></span></div>";
   _html+="<p id='queuestatus' ></p><ol id='log'></ol></div>"
   $("<div id='divDialogForm'></div>").html(_html).dialog(dlgOpt).dialog('open');
   fnSetAttachedFiles((FileData.length>0)?true:false,true);//Sudedam failus i Dialoga
   $('#swfupload-control').swfupload({
      upload_url: opt.upload_url,
      post_params: {
         RecId: opt.RecId,
         UserId: opt.UserId,
         tblUpdate: opt.tblUpdate
      },
      file_post_name: 'uploadfile',
      file_size_limit: "102400",//100MB
      //file_types: "*.jpg;*.png;*.gif",
      //file_types_description: "Image files",
      file_upload_limit: 0,
      flash_url: "/Scripts/Plugins/swfupload.swf",
      //button_image_url: '/Content/Images/wdp_buttons_upload_114x29.png',
      button_width: 400,
      button_height: 40,
      button_cursor: SWFUpload.CURSOR.HAND,
      button_placeholder: $('#dialog_file_upload_btn')[0],
      button_text: "<span class='theStyle'>Spragtelėkite pasirinkti bylas esančias jūsų kompiuteryje</span>",
      button_text_style: '.theStyle {text-decoration:underline;color:#336699;font-size:14;}',
      debug: false
   })
      .bind('fileQueued', function(event, file) {
         var listitem='<li id="'+file.id+'" >'+
         'Byla: <em>'+file.name+'</em> ('+Math.round(file.size/1024)+' KB) <span class="progressvalue" ></span>'+
         '<div class="progressbar" ><div class="progress" ></div></div>'+
         '<p class="status" >Pending</p>'+
         '<span class="cancel" >&nbsp;</span>'+
         '</li>';
         $('#log').append(listitem);
         $('li#'+file.id+' .cancel').bind('click', function() { //Remove from queue on cancel click
            var swfu=$.swfupload.getInstance('#swfupload-control');
            swfu.cancelUpload(file.id);
            $('li#'+file.id).slideUp('fast');
         });
         // start the upload since it's queued
         $(this).swfupload('startUpload');
      })
      .bind('fileQueueError', function(event, file, errorCode, message) {
         alert('Failo '+file.name+' dydis per didelis - '+Math.round(file.size/1024)+' KB');
      })
      .bind('fileDialogComplete', function(event, numFilesSelected, numFilesQueued) {
         //$('#queuestatus').text('Files Selected: '+numFilesSelected+' / Queued Files: '+numFilesQueued);
         $('#queuestatus').text('Pasirinkta failų siuntimui: '+numFilesQueued).css('display', 'block');
      })
      .bind('uploadStart', function(event, file) {
         $('#log li#'+file.id).find('p.status').text('Uploading...');
         $('#log li#'+file.id).find('span.progressvalue').text('0%');
         $('#log li#'+file.id).find('span.cancel').hide();
      })
      .bind('uploadProgress', function(event, file, bytesLoaded) {
         //Show Progress
         var percentage=Math.round((bytesLoaded/file.size)*100);
         $('#log li#'+file.id).find('div.progress').css('width', percentage+'%');
         $('#log li#'+file.id).find('span.progressvalue').text(percentage+'%');
      })
      .bind('uploadSuccess', function(event, file, serverData) {
         var s=JSON.parse(serverData);
         var item=$('#log li#'+file.id);
         var fData=(opt.AttachedFiles)?oDATA.Get(opt.AttachedFiles).Data:0;
         item.find('div.progress').css('width', '100%');
         item.find('span.progressvalue').text('100%');
         if(s.FileId>0) {
            var NewFile=[s.FileId, opt.UserId, s.Date, Math.round(file.size/1024), file.name, opt.RecId, ''];
            FileData[FileData.length]=NewFile;
            if(fData) { fData[fData.length]=NewFile; }
            var type=(file.name.substring(file.name.search("\\."))).toLowerCase()
            var pathtofile='<a href="/Uploads/'+s.FileId+type+'" alt="'+file.name+'" target="_blank">Atidaryti &raquo;</a>';
            item.attr("title", "Prisegė - "+s.User+", "+s.Date).addClass('success').find('p.status').html('Baigta - '+Math.round(file.size/1024)+' KB | '+pathtofile);
            if(file.name.IsImage()) { item.qtip({ content: '<IMG WIDTH=200 HEIGHT=200 SRC="'+'/Uploads/'+s.FileId+type+'" ALT="'+file.name+'">', position: { at: 'top right', my: 'bottom left'} }) }
            //else { item.qtip({ position: { corner: { target: "bottomLeft"}} }); }
            else { item.qtip({ style: { tip: "bottomLeft"} }) }
         } else {
            item.addClass('error').find('p.status').html('Nepavyko - '+s.Msg);
         }
      })
      .bind('uploadComplete', function(event, file) {
         // upload has completed, try the next one in the queue
         $(this).swfupload('startUpload');
         //setTimeout(function() {
         //   $('#'+file.id).fadeOut(1000, CallBackAfterNoteRemove($('#'+file.id)));
         //}, 3000); //ikisama callbacka kai baigia
      })
   //   var CallBackAfterNoteRemove=function(e) {
   //      e.remove();
   //      if(!$('.success').length) { $('#queuestatus').css('display', 'none'); }
   //   }
};
oCONTROLS.UploadDialog.SetAttachedFiles=function(par,ToDialog) {
   //{FileData:(jei reikia filtruot iš AttachedFiles), RecId:??, CtrlToSetId:'uplFiles' arba i nurodyta,AttachedFiles: formatas kaip nurodyta zemiau}
   //0-FileId,User,Date-from server
   //3-SizeKB,FileName
   //5-RecId,Description
   //ctrl turi but Recordo ID
   //var f=par.AttachedFiles,
   var u=oDATA.Get("tblUsers").Data;
   var LeftOuter="<div style='clear:left;'><div style='margin-top:10px;height:46px;width:37px;float:left;'>";
   var RightOuter="</div><div style='height:46px;width:305px;float:left;'>";
   var RightInner="<div style='height:15px;width:304px;float:left;'>";
   var ctrl =((ToDialog)?$("#uplFiles"):$("#"+par.CtrlToSetId)).empty();
   $.post("/Files/GetUploads", { FileName: par.tblUpdate, RecordID: par.RecId }, function(jsRes) {
      var f=jsRes.Files.Data;
      for(var i=0; i<f.length; i++) {
         if(par.HaveData) { par.FileData[par.FileData.length]=f[i]; }
         var html=LeftOuter+f[i][4].GetIcon(f[i][0])+RightOuter+RightInner;  //icon,
         html+="Byla: <a href='/Files/Download/"+f[i][0]+"'>"+f[i][4]+", "+f[i][3]+"KB</a></div>"; //FileName, size
         html+=RightInner+"Įkėlė: "+u.findColsByID(f[i][1], [2, 3])+", "+f[i][2]+"</div>"; //vartotojas,data
         html+=RightInner+'<div style="width:100%;" '+((f[i][6])?'>':'class="inputTip">')+((f[i][6])?f[i][6]:"")+'</div></div></div></div>'; //Pastaba
         $(html).appendTo(ctrl).find('div:last').MyEditInPlace({ id: f[i][0], tblUpdate: "tblDocs_UploadedFiles", Field: "Description", default_text: "Spragtelkit pridėti pastabą..", Title: "Pastaba apie failą",
            fnUpdateSuccess: function(pars) { pars.ctrl.removeClass("inputTip"); } //$ctrl,eOpt[is opciju],id
         });
      }
      ctrl.find("span.img32-Img").each(function() {//rodom paveiksla ant imidzu
         var h=$(this).parent().attr("href");
         $(this).parent().qtip({
            content: '<IMG WIDTH=200 HEIGHT=200 SRC="'+h+'">', position: { at: 'top right', my: 'bottom left' }
         });
      });
   });
};
var g=!1;
(function(c){c.ga("ui.ComboBox",{options:{a:"List",c:{g:g,l:g},C:0,d:[1],k:g,o:""},N:function(){function d(e){new clsEditableForm({da:b.n,G:e?"Edit":"Add",P:e?oDATA.L(e,b.n):0,H:function(f){c(a).data("newval",f[b.C]);c(a).e(f.h(b.d));c(a).b("inputTip");"Add"===(e?"Edit":"Add")?h[h.length]=f.h(b.d):h.M(f.h(b.d))}})}var a=c(this.element[0]);void 0===a&&alert("Error! Input not found for ComboBox! (MyPlugins_ComboBox:15)");var b=c.extend(this.options,c(a).data("ctrl")),h;OptVal=parseInt(b.o,10);h=c.map(oDATA.K(b.n).I,
function(e){e[0]===OptVal&&a.e(e.h(b.d));return{id:e[0],label:e[b.d[0]]}});"undefined"!==typeof b.v&&(h[h.length]=b.v);c(a).data("newval",b.o).autocomplete({k:b.k,V:0,ca:"None"===this.options.a?2:0,S:!0,source:function(a,b){b(c.fa.autocomplete.filter(h,a.t))},select:function(a,f){if(f.item&&f.item.id!==c(this).data("newval")){c(this).data("newval",f.item.id).e(c(this).data("ctrl").z==="List"?f.item.value:f.item.label);b.j&&My.A(b.j,My,this,f.item);return g}},T:function(e,f){if(!f.item){b.j&&My.A(b.j,
My,this,null);var d=c(this);d.data("newval","");if(b.w&&b.w===d.e())return true;b.z==="List"&&d.e("");if(typeof a.data("autocomplete")!="undefined")a.data("autocomplete").t="";d.b("alink");return g}c(this).b("inputTip")},close:function(){if(b.c.l){var c=a.data("newval");!a.r("alink")&&c?a.f("alink").u("dblclick").bind("dblclick",function(){d(c)}):c?a.u("dblclick").bind("dblclick",function(){d(c)}):a.r("alink")&&!c&&a.b("alink").u("dblclick")}a.b("activeField");b.B&&a.data("newval")&&b.B(a.data("newval"),
a.e())},open:function(){b.a!=="List"&&(a.r("activeField")||a.f("activeField"));if(b.a=="None"||b.a=="Combo"){var e=c(this).data("autocomplete");e.F.element.find("a").X(function(){var a=c(this),b=RegExp(e.t,"gi");a.Z(a.text().replace(b,function(a){return'<span style="color:red">%s</span>'.replace("%s",a)}))})}}});if(b.c.l){var i=a.data("newval");i&&a.f("alink").bind("dblclick",function(){d(i?i:0)})}("None"!==b.a||b.c.g)&&a.b("ui-corner-all").f("ui-corner-left");c(".ui-autocomplete-input").ba("autocompleteopen",
function(){var a=c(this).data("autocomplete"),b=a.F;a.options.k&&b.Q(c.J({type:"mouseenter"}),b.element.children().Y())});c(a).data("autocomplete").O=function(a,b){return c("<li></li>").data("item.autocomplete",b).append("<a>"+b.value+"</a>").R(a)};b.c.g&&(c(this).data("newval"),this.p({title:"Prid\u0117ti nauj\u0105",s:"img16-add_new",q:function(){d(0)},m:g},a));"None"!=b.a&&this.p({title:"Parodyti visus",s:"ui-icon-triangle-1-s",q:function(){if(a.autocomplete("widget").D(":visible"))a.autocomplete("close");
else{a.autocomplete("search","");a.focus();return g}},m:b.c.g?!0:g},a);"List"==b.a?(a.i("readonly",!0),a.click(function(){if(a.autocomplete("widget").D(":visible")){a.autocomplete("close");return g}a.autocomplete("search","");a.focus();return g})):a.click(function(){this.select()})},p:function(d,a){this.button=c("<button style='left:0;margin-left:.07em;'>&nbsp;</button>").i("tabIndex",-1).i("title",d.title).aa(a).button({$:{ea:d.s},text:g}).U("vertical-align","bottom").width(22).height(a.height()+
3.8).click(function(){d.q();return g}).b("ui-corner-all").f("ui-button-icon"+(d.m?"":" ui-corner-right")).find("span.ui-icon").i("style","margin-left:0.1em;left:0;");a.width(a.width()-this.button.width())},W:function(){}})})(jQuery);
